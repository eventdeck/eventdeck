<div class="all-100 column-group horizontal-gutters">
  <div class="all-100">
    <h1 class="all-100">Comments</h1>

    <h3 class="all-100" ng-show="loading">Loading...</h3>

    <div class="all-100 activity grey" style="border-radius: 5px;" ng-hide="loading" ng-repeat="comment in comments | orderBy: 'posted':false">
      <div style="float: left;">
        <a href="/#/member/{{comment.member}}"><img ng-src="{{'https://graph.facebook.com/' + getMember(comment.member).facebook + '/picture'}}"/></a>
      </div>
      <div style="float: left;">
        <small>{{timeSince(comment.posted)}}</small>
        <div ng-bind-html="convertNewLinesToHtml(comment.html)"></div>
      </div>
      <div style="float: left;">
        <small>
          <a class="ink-button green" ng-click="quoteComment(comment)">Quote</a>
          <a class="ink-button orange" ng-show="comment.member == me.id" href="/#/comment/{{comment._id}}/edit">Edit</a>
          <a class="ink-button red" ng-show="comment.member == me.id" ng-click="deleteComment(comment._id)">Delete</a>
        </small>
      </div>
    </div>
  </div>

  <div class="all-100">
    <div class="all-45 half-right-space">
      <form class="ink-form" ng-submit="submitComment()">
        <div class="control-group">
          <label for="markdownfield">Your Comment in Markdown</label>
          <a href="https://guides.github.com/features/mastering-markdown/" target="_blank">Help?</a>
          <div class="control">
            <textarea id="markdownfield" ng-model="commentData.markdown" type="text" rows="6" width="90%"></textarea>
          </div>
        </div>
        <div class="control-group">
          <input type="submit" id="submit" value="Post Comment" class="ink-button green" />
          <div ng-show="emptyComment" class="ink-alert basic error">You can't post empty comments.</div>
        </div>
      </form>
    </div>
    <div class="all-45">
      <h6>Preview</h6>
      <div compile="convertMarkdownToHtml(commentData.markdown)"></div>
    </div>
  </div>
</div>
